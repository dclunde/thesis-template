\section{Future Work}

Because of the nature of SINATRA, it is expected for there to be a large amount of future work. This code base is not a new concept in the world of DSMC and PIC or even DSMC-PIC. The important part about this is that it will be developed further to a point where Cal Poly has a homegrown code which is state of the art and can help develop new Aerospace technology.

\section{Boundaries}

One part of SINATRA which is underdeveloped is the handling of boundaries. Currently, SINATRA handles the main 6 boundaries. It has the capability to define the type of wall and the characteristics of the particles flowing through that wall, but it ignores any boundaries inside of the domain, and the 6 wall faces are all symmetric, it cannot split a wall into multiple types or characteristics. While dealing with boundaries inside the domain will not be needed for a plasma plume, it will be important to be able to split the boundaries so that part of the wall can simulate the thruster nozzle. The path forward for boundaries is twofold. First, a boundary class needs to be build within SINATRA which allows the user to specify sections which will be different from the rest of the domain. At that stage it would be reasonable to simulate a thruster nozzle. \par

\indent The next stage would be to build Cart3D integration. Cart3D is a meshing software that can create an octree mesh which includes internal domain boundaries. This allows a user to import a CAD file and get out a mesh which SINATRA can understand. This is critical for upper atmosphere calculations around aircraft or spacecraft bodies. It can also be used for objects in Low Earth Orbit. The Cart3D tool will allow users to specify what each external and internal boundary type is and can split these boundaries into much smaller pieces. It can also dynamically change the mesh size depending on distance to a wall and other user specifications which will allow for more accurate DSMC-PIC simulation data. This integration will need to be completed before SINATRA can create useful simulation results. \par


\section{Electric Thruster}

As mentioned above, in order for an accurate electric thruster simulation there will need to be changes in how boundaries are handled in SINATRA. This is the most important change that will be needed for accurate simulations of electric thruster plumes. The next important upgrade would be to the Poisson solver. Currently, a finite volume solver is being used. This is a good robust solver which is well researched and understood, but it has a few restrictions. First, and most importantly, it expects the mesh to be evenly sized across the entire domain. This is works with the current version of SINATRA with the home-built meshing software; however, once the boundaries are changed to where the mesh is not completely uniform, the Poisson solver will break. This solver also can only handle straight boundaries, which may be acceptable because the DSMC portion can only handle straight approximations of curves on account of the octree mesh. There are many other options for a Poisson solver which are explored in PIC research. For example, the BLANK solver from BLANK cite{Something} would be a good option for SINATRA. This upgrade would also greatly reduce the execution time, and therefore allow for larger and more accurate simulations. \par

% TO DO talk about the solver - using sparce matrices, handling the difference between cells and nodes, and changing solver
\section{Charged Particles}

There are many faces to simulating charged particles. While the author has captured the largest features of charged particles, there are many other physical attributes which make charged particles a complicated and interesting subject. There are two main physical properties which would be the most likely candidates to be added to SINATRA. They are charged collisions and surface interactions. \par

\indent When charged particles are involved there are many new types of particle collisions. There are ionization and recombination collisions. These are being ignored in SINATRA because the electrons are being modeled as a fluid; however, if magnetic fields were to be included, for example for a magnetic nozzle, or if the grids need to be modeled in SINATRA, then this assumption would no longer be valid. The simulation would have to drastically reduce its simulation time step for the fast electrons and also need to consider ionization and recombination collisions. There are also chemical interactions that are also not being considered in the scope of this project. Both of those types of collisions will most likely not be needed for accurate plasma plume simulations. In order for these collisions to be included as well as the DSMC modeled collision schemes the collision class will need to be updated to be able to handle multiple schemes within the same simulation. \par

\indent However, Charge exchange collisions will need to be eventually included. Charge exchange collisions are instances where a charged ion’s electron cloud will interact with a neutral atom electron field cite{pic}. There is a possibility in these collision for an electron to be stripped from the neutral atom to the charged ion. The charge is exchanged between the two particles; the neutral atom becomes a charged ion and the charged ion becomes a neutral atom, but there is no significant change in momentum. This type of collision is common and significant in electric thruster plumes. While most thrusters are efficient at ionizing the propellant, there are still neutral atoms which come out of the chamber and into the plume. Their relatively slow velocities cause the relative density of the neutral atoms to be high near the thruster nozzle. Charge exchange collisions (CEX) are therefore likely. The resultant slow-moving ions are very susceptible to the radial component of the electric field set up by the plume. While the fast-moving ions will diverge, they do so slowly because of their high initial velocity. however, these new ions are moving slowly and therefore are more easily affected by the radial electric field. They create what is called CEX wings \cite{cex_wings}. These can have large impacts on electric thruster design and therefore need to be added to SINATRA eventually.


\begin{figure}
\includegraphics[width=.65\textwidth]{CEX.JPG}
\centering
\caption{Visualization of CEX wings\cite{cex_wings}}
\label{fig:CEX}
\end{figure}

\indent Another important difference from neutral particles that arises when doing a charged particle simulation is surface interactions. SINATRA models various types of surface interactions through its boundary handling. There can be inflow, outflow, specular and diffuse walls. However, especially with CEX collisions, charged particles can interact with a spacecraft surface and impart their charge onto it \cite{surface_charge}. The surface can be modeled as a grounded conductor or as a perfect insulator or as a mix between the two. This type of modeling will need to be included into SINATRA whenever boundaries are introduced into the domain.

\section{SINATRA Efficiency and Capability}

There are many sections in SINATRA that need to be updated before SINATRA can be used as a cutting edge research tool. It was developed by Mechanical and Aerospace engineers, not by computer scientists, therefore, many of the algorithms, storage methods, and memory access are not optimized. The author has removed the largest and simplest bottlenecks, but there are many more areas of optimization. The next largest bottleneck is sampling of data. When SINATRA samples data from the simulation, it prints it out into text files. This printing is one of the slowest portions of the simulation. Tecplot has an API which allows users to print binary files and for Tecplot to read those. This was attempted by the original developers, but they were not successful. It requires a deeper understanding of C++ and binary. There are many examples of this throughout the code which can be optimized by a developer with that type of skill set. \par

\indent Within that similar skill set lies parallelization. Similar to the bottlenecks above the author has implemented a simple version of parallelization, however, there are many better ways to implement it. It could be implemented by splitting the domain into multiple pieces and the octree mesh makes this a viable option. Another option would be to split a larger section of each timestep into many parts. The simulation could also be parallelized by having each core run the same simulation and calculate the time average. Then the multiple different simulations could be averaged as a way to reduce the randomness of DSMC so that an accurate solution is calculated. Parallelization is still on the cutting edge of computer science, and therefore this would be a fruitful project for a developer with experience in this area. \par

\indent Within the DSMC community, there are many schools of thought about the best way to work with time steps and mesh sizes citeBird. It is possible to have variable time steps as well as variable mesh sizes. It is also possible for the time step to change for each particle depending on their velocity and the size of the mesh cell they are within. There are algorithms which create a mesh which changes size depending on the average number of particles in a cell. This creates a mesh which changes with the flow and eventually sets up an optimal mesh for that simulation and steady state flow condition. SINATRA is a currently at its first iteration, therefore it uses a fixed time step for all particles and a fixed mesh. Upgrading SINATRA to a more complicated time step and mesh algorithm would be a good project for a future developer. In order to keep charged particle capability, the Poisson solver would have to be upgraded at the same time because it is currently based on the fixed mesh. This upgrade could greatly reduce SINATRA’s execution time and, therefore, allow higher resolution and accurate simulations. \par

\section{Systems Operations}

It will be important to continually update the systems engineering sections of SINATRA. The author has set up systems which will hopefully be helpful at keeping SINATRA up to date and relevant, but they will need to be monitored and maintained
 \par

\indent First, the simple distributions need to be kept up to date. There are distributions for Windows, Linux, and Mac. If SINATRA continues to grow at Cal Poly, an official release website with version control can be set up. Until then it will be released through .zip files being sent to the new users, therefore, the distributions need to be up to date with the current stable version of SINATRA, input files, and GUI. \par

\indent The GUI will also need to be updated as there are changes to the input class. Whenever the input class requires a different way to input variables to the simulation, the GUI will also need to be changed to accommodate for that. It will also have to be updated when the interface changes for boundaries and output options. It is not difficult maintenance the GUI, but it can easily become obsolete if it is left alone while developing. \par

\indent The author has ensured that the Github repository is kept up to date and clean as much as possible. It will be necessary to use the Github while developing new code. It can be easy for new developers to develop in their own local machine and ignore the Github. This ruins the continuity of the version control of Github and more importantly makes it harder for new developers to add their contribution. The Github should be kept as a version of the code which can be easily shared with new developers and they will not be confused, nor distracted by extra files and information. If SINATRA is well taken care of, it will become a legacy code that will allow Cal Poly to shine as a school with advanced modeling skills and allow new and revolutionary technology to come from ’Learning by Doing’.




